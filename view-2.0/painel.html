<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Painel de Controle</title>
  <link rel="stylesheet" href="CSS/painel.css" />
</head>

<body>
  <div class="faixa-topo"></div>

  <div class="univap-logo">
    <img src="Imagens/Univap[Negativo].png" alt="Logo Univap" />
  </div>

  <div class="faixa-base"></div>

  <div class="conteudo-principal">
    <!-- PAINEL DE CONTROLE (LADO ESQUERDO) -->
    <div class="painel-controle">

      <!-- FILTROS -->
      <div class="filtros-container">
        <input type="text" id="filtroNome" class="filtro-input" placeholder="Filtrar por nome do aluno..." />

        <select id="filtroTurma" class="filtro-select">
          <option value="">Filtrar por turma...</option>
          <option value="1A">1A</option>
          <option value="2B">2B</option>
          <option value="3A">3A</option>
        </select>

        <select id="filtroStatus" class="filtro-select">
          <option value="">Filtrar por status...</option>
          <option value="pendente">Pendente</option>
          <option value="aprovado">Aprovado</option>
          <option value="reprovado">Reprovado</option>
        </select>
      </div>

      <!-- DADOS DO USUÁRIO -->
      <div id="div_dados_usuario"></div>

      <!-- SEÇÃO GERENCIAR -->
      <div class="secao-gerenciar">
        <div class="titulo-gerenciar">Gerenciar</div>
        <div class="botoes-navegacao">
          <a href="alunos.html" class="botao-navegacao">Alunos</a>
          <a href="professor.html" class="botao-navegacao">Professores</a>
          <a href="disciplina.html" class="botao-navegacao">Disciplinas</a>
          <a href="funcionario.html" class="botao-navegacao">Desenvolvedores</a>
          <a href="provaSub.html" class="botao-navegacao">SUB</a>
          <a href="requisicao.html" class="botao-navegacao">Requisições</a>
        </div>
      </div>

      <!-- SEÇÃO GERAR -->
      <div class="secao-gerar">
        <div class="titulo-gerenciar">Gerar</div>
        <div class="botoes-acao">
          <a href="#" class="botao-acao" onclick="gerarPlanilha()">Planilha Excel</a>
          <a href="#" class="botao-acao" onclick="gerarCanhotos()">Canhotos</a>
        </div>
      </div>
    </div>

    <!-- LISTA DE REQUERIMENTOS (LADO DIREITO) -->
    <div class="requerimentos-lista">
      <div class="lista-titulo">
        <h2>Requerimentos</h2>
      </div>

      <div class="requerimentos-container">

        <!-- CARD 1 -->
        <div class="requerimento-card" data-nome="João Pedro Silva" data-turma="3A" data-status="pendente">
          <p><strong>Nome:</strong> João Pedro Silva</p>
          <p><strong>Matrícula:</strong> 50230223</p>
          <p><strong>Turma:</strong> 3A</p>
          <p><strong>Disciplina:</strong> Matemática Aplicada</p>
          <p><strong>Professor:</strong> Ana Paula Santos</p>
          <p><strong>Data da Prova:</strong> 15/08/2025</p>
          <p><strong>Semana:</strong> G2</p>
          <p><strong>Tipo de Requerimento:</strong> Atestado Médico</p>
          <div class="botoes-status">
            <button class="btn-aprovar" onclick="aprovarRequerimento(this)">Aprovar</button>
            <button class="btn-reprovar" onclick="reprovarRequerimento(this)">Reprovar</button>
          </div>
          <div class="status-badge status-pendente">Pendente</div>
        </div>

        <!-- CARD 2 -->
        <div class="requerimento-card" data-nome="Maria Eduarda Costa" data-turma="2B" data-status="aprovado">
          <p><strong>Nome:</strong> Maria Eduarda Costa</p>
          <p><strong>Matrícula:</strong> 50230156</p>
          <p><strong>Turma:</strong> 2B</p>
          <p><strong>Disciplina:</strong> Física Geral</p>
          <p><strong>Professor:</strong> Carlos Roberto Lima</p>
          <p><strong>Data da Prova:</strong> 18/08/2025</p>
          <p><strong>Semana:</strong> G1</p>
          <p><strong>Tipo de Requerimento:</strong> Outro</p>
          <div class="botoes-status">
            <button class="btn-aprovar" onclick="aprovarRequerimento(this)">Aprovar</button>
            <button class="btn-reprovar" onclick="reprovarRequerimento(this)">Reprovar</button>
          </div>
          <div class="status-badge status-aprovado">Aprovado</div>
        </div>

        <!-- CARD 3 -->
        <div class="requerimento-card" data-nome="Pedro Henrique Almeida" data-turma="1A" data-status="pendente">
          <p><strong>Nome:</strong> Pedro Henrique Almeida</p>
          <p><strong>Matrícula:</strong> 50230089</p>
          <p><strong>Turma:</strong> 1A</p>
          <p><strong>Disciplina:</strong> Química Orgânica</p>
          <p><strong>Professor:</strong> Fernanda Oliveira</p>
          <p><strong>Data da Prova:</strong> 20/08/2025</p>
          <p><strong>Semana:</strong> G2</p>
          <p><strong>Tipo de Requerimento:</strong> Atestado</p>
          <div class="botoes-status">
            <button class="btn-aprovar" onclick="aprovarRequerimento(this)">Aprovar</button>
            <button class="btn-reprovar" onclick="reprovarRequerimento(this)">Reprovar</button>
          </div>
          <div class="status-badge status-pendente">Pendente</div>
        </div>
      </div>
    </div>
  </div>

  <!-- ================== FILTRO E STATUS APROVADO/REPROVADO ================== -->
  <script>
    // Função para filtrar requerimentos
    function filtrarRequerimentos() {
      const filtroNome = document.getElementById('filtroNome').value.toLowerCase();
      const filtroTurma = document.getElementById('filtroTurma').value;
      const filtroStatus = document.getElementById('filtroStatus').value;
      const cards = document.querySelectorAll('.requerimento-card');

      cards.forEach(card => {
        const nome = card.dataset.nome.toLowerCase();
        const turma = card.dataset.turma;
        const status = card.dataset.status;

        const nomeMatch = nome.includes(filtroNome);
        const turmaMatch = !filtroTurma || turma === filtroTurma;
        const statusMatch = !filtroStatus || status === filtroStatus;

        if (nomeMatch && turmaMatch && statusMatch) {
          card.style.display = 'block';
        } else {
          card.style.display = 'none';
        }
      });
    }

    // Event listeners para os filtros
    document.getElementById('filtroNome').addEventListener('input', filtrarRequerimentos);
    document.getElementById('filtroTurma').addEventListener('change', filtrarRequerimentos);
    document.getElementById('filtroStatus').addEventListener('change', filtrarRequerimentos);

    // Funções para aprovar e reprovar requerimentos
    function aprovarRequerimento(button) {
      const card = button.closest('.requerimento-card');
      const statusBadge = card.querySelector('.status-badge');

      card.dataset.status = 'aprovado';
      statusBadge.textContent = 'Aprovado';
      statusBadge.className = 'status-badge status-aprovado';

      alert('Requerimento aprovado com sucesso!');
    }

    function reprovarRequerimento(button) {
      const card = button.closest('.requerimento-card');
      const statusBadge = card.querySelector('.status-badge');

      card.dataset.status = 'reprovado';
      statusBadge.textContent = 'Reprovado';
      statusBadge.className = 'status-badge status-reprovado';

      alert('Requerimento reprovado!');
    }

    // Função para gerar planilha Excel (simulada)
    function gerarPlanilha() {
      alert('Planilha Excel gerada com sucesso! (Funcionalidade simulada)');
    }

    // Função para gerar canhotos (simulada)
    function gerarCanhotos() {
      alert('Canhotos gerados com sucesso! (Funcionalidade simulada)');
    }
  </script>

  <script>
    // Obtem os dados do usuário do localStorage
    const dadosUsuario = localStorage.getItem("dados");
    const objUsuario = JSON.parse(dadosUsuario);

    // Exibe o e-mail do usuário no painel
    const div_dados_usuario = document.getElementById("div_dados_usuario");
    div_dados_usuario.appendChild(document.createTextNode(`Bem-vindo, ${objUsuario.funcionario.emailFuncionario}`));
  </script>
</body>
</html>
